Respuesta corta de entrevista

Un trigger es una acción automática que se ejecuta cuando ocurre un evento en una tabla, sin necesidad de que el usuario la invoque.

Un trigger se ejecuta automáticamente cuando ocurre un evento: INSERT, UPDATE o DELETE.

Un TRIGGER (gatillo) es un objeto de la base de datos que se ejecuta automáticamente antes 
o después de que ocurra un evento (INSERT, UPDATE o DELETE) sobre una tabla,
con el objetivo de realizar acciones adicionales sin intervención del usuario.


11.1 Trigger BEFORE INSERT
DELIMITER $$
CREATE TRIGGER antes_insert_empleado
BEFORE INSERT ON empleados
FOR EACH ROW
BEGIN
SET NEW.fecha_ingreso = CURDATE();
END $$
DELIMITER ;

11.2 Trigger AFTER UPDATE
DELIMITER $$
CREATE TRIGGER despues_update_salario
AFTER UPDATE ON empleados
FOR EACH ROW
BEGIN
INSERT INTO historial_salarios(empleado_id, salario_anterior, salario_nuevo, fecha)
VALUES (OLD.id, OLD.salario, NEW.salario, NOW());
END $$
DELIMITER ;


//otro ejemplo
CREATE TRIGGER trg_fecha_alta
AFTER INSERT ON clientes
FOR EACH ROW
SET NEW.fecha_alta = NOW();

//Después de insertar un nuevo cliente, el trigger se ejecuta para capturar y guardar la fecha u hora en que se dio de alta.

Detalles importantes (pregunta trampa)

Se ejecuta automáticamente

Puede ser:

BEFORE INSERT

AFTER INSERT

BEFORE UPDATE

AFTER DELETE

No se ejecuta manualmente

Útil para:

auditorías

bitácoras

validaciones

reglas de negocio