ğŸ§  1. Usa Ã­ndices correctamente (no a lo loco)

âŒ Mal:

SELECT * FROM ventas WHERE YEAR(fecha) = 2024;


âœ… Bien:

SELECT *
FROM ventas
WHERE fecha >= '2024-01-01'
  AND fecha <  '2025-01-01';


â¡ï¸ RazÃ³n:
Las funciones (YEAR, MONTH) rompen el uso de Ã­ndices.

ğŸ§  2. Indexa lo que se usa en WHERE, JOIN, ORDER BY
CREATE INDEX idx_ventas_fecha ON ventas(fecha);
CREATE INDEX idx_ventas_cliente ON ventas(cliente_id);


âš ï¸ No indexar:

columnas que casi no se consultan

tablas muy pequeÃ±as

ğŸ§  3. Evita SELECT *

âŒ Mal:

SELECT * FROM empleados;


âœ… Bien:

SELECT nombre, salario FROM empleados;


â¡ï¸ Menos memoria, mÃ¡s rÃ¡pido.

ğŸ§  4. Usa EXISTS en lugar de IN (grandes volÃºmenes)

âŒ

SELECT *
FROM clientes
WHERE id IN (SELECT cliente_id FROM ventas);


âœ…

SELECT *
FROM clientes c
WHERE EXISTS (
  SELECT 1
  FROM ventas v
  WHERE v.cliente_id = c.id
);

ğŸ§  5. Ãndices compuestos (MUY importante)
CREATE INDEX idx_ventas_fecha_tienda
ON ventas(fecha, tienda_id);


âœ” Orden del Ã­ndice importa:

WHERE fecha = ? AND tienda_id = ? â†’ usa Ã­ndice

WHERE tienda_id = ? â†’ âŒ no lo usa

ğŸ§  6. GROUP BY y ORDER BY bien usados

âŒ

SELECT departamento_id, COUNT(*)
FROM empleados
GROUP BY departamento_id
ORDER BY nombre;


âœ…

ORDER BY COUNT(*) DESC;

ğŸ§  7. Limita resultados SIEMPRE que puedas
SELECT *
FROM logs
ORDER BY fecha DESC
LIMIT 100;

ğŸ§  8. Usa EXPLAIN (clave de senior)
EXPLAIN SELECT *
FROM ventas
WHERE fecha >= '2025-01-01';


Mira:

type

key

rows

ğŸ‘‰ Si ves ALL â†’ full table scan (mal).

ğŸ§  9. Evita subconsultas innecesarias

âŒ

SELECT *
FROM empleados
WHERE departamento_id IN (
  SELECT id FROM departamentos WHERE activo = 1
);


âœ…

SELECT e.*
FROM empleados e
JOIN departamentos d ON e.departamento_id = d.id
WHERE d.activo = 1;

ğŸ§  10. Transacciones cortas

âŒ TransacciÃ³n larga = bloqueos
âœ… Haz solo lo necesario y COMMIT rÃ¡pido